---
const currentPath = Astro.url.pathname;
---

<header class="header" id="header">
	<nav class="nav">
		<div class="container">
			<div class="nav-content">
				<!-- Desktop Navigation -->
				<div class="nav-links">
					<a href="/" class={currentPath === '/' ? 'active' : ''}>Accueil</a>
					<a href="/restaurant" class={currentPath === '/restaurant' ? 'active' : ''}>Le Restaurant</a>
					<a href="/jardin-hiver" class={currentPath === '/jardin-hiver' ? 'active' : ''}>Le Jardin d'Hiver</a>
					<a href="/terrasse" class={currentPath === '/terrasse' ? 'active' : ''}>La Terrasse</a>
					<a href="/menu" class={currentPath === '/menu' ? 'active' : ''}>Menu</a>
					<a href="/contact" class={currentPath === '/contact' ? 'active' : ''}>Contact</a>
					<a href="tel:+41219461126" class="btn btn-primary">Réserver</a>
				</div>

				<!-- Mobile Menu Button -->
				<button class="mobile-menu-btn" id="mobile-menu-btn">
					<span></span>
					<span></span>
					<span></span>
				</button>
			</div>

			<!-- Mobile Navigation -->
			<div class="mobile-menu hidden" id="mobile-menu">
				<a href="/">Accueil</a>
				<a href="/restaurant">Le Restaurant</a>
				<a href="/jardin-hiver">Le Jardin d'Hiver</a>
				<a href="/terrasse">La Terrasse</a>
				<a href="/menu">Menu</a>
				<a href="/contact">Contact</a>
				<a href="tel:+41219461126" class="btn btn-primary">Réserver</a>
			</div>
		</div>
	</nav>
</header>

<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		background: transparent;
		backdrop-filter: none;
		z-index: 1000;
		transition: all 0.4s ease;
		box-shadow: none;
	}

	.header.scrolled {
		background: rgba(255, 255, 255, 0.95);
		backdrop-filter: blur(15px);
		box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
	}

	.nav {
		padding: 1.5rem 0;
		transition: padding 0.4s ease;
	}

	.header.scrolled .nav {
		padding: 1rem 0;
	}

	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 1rem;
	}

	.nav-content {
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
	}

	.nav-links {
		display: flex;
		align-items: center;
		gap: 2.5rem;
		justify-content: center;
		width: 100%;
	}

	.nav-links a {
		text-decoration: none;
		color: var(--white);
		font-weight: 500;
		font-size: 1rem;
		transition: all 0.3s ease;
		position: relative;
		text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
		padding: 0.5rem 0;
	}

	.header.scrolled .nav-links a:not(.btn) {
		color: var(--text-dark);
		text-shadow: none;
	}

	.nav-links a:not(.btn):hover,
	.nav-links a.active:not(.btn) {
		color: var(--primary-green);
		text-shadow: none;
		transform: translateY(-1px);
	}

	.nav-links a.active:not(.btn)::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 2px;
		background-color: var(--primary-green);
		border-radius: 1px;
	}

	/* Bouton Réserver */
	.nav-links .btn {
		background-color: var(--primary-green);
		color: var(--white);
		border: 2px solid var(--primary-green);
		padding: 0.6rem 1.5rem;
		border-radius: 0.5rem;
		font-weight: 600;
		text-shadow: none;
		transition: all 0.3s ease;
	}

	.nav-links .btn:hover {
		background-color: var(--accent-green);
		border-color: var(--accent-green);
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(127, 176, 105, 0.4);
	}

	.mobile-menu-btn {
		display: none;
		flex-direction: column;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		position: absolute;
		right: 1rem;
		top: 50%;
		transform: translateY(-50%);
	}

	.mobile-menu-btn span {
		width: 25px;
		height: 3px;
		background-color: var(--white);
		margin: 3px 0;
		transition: all 0.3s ease;
		box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
	}

	.header.scrolled .mobile-menu-btn span {
		background-color: var(--text-dark);
		box-shadow: none;
	}

	.mobile-menu {
		display: none;
		flex-direction: column;
		gap: 1rem;
		padding: 1.5rem 0;
		border-top: 1px solid rgba(255, 255, 255, 0.2);
		margin-top: 1rem;
		background: rgba(255, 255, 255, 0.98);
		backdrop-filter: blur(15px);
		border-radius: 0 0 1rem 1rem;
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
	}

	.mobile-menu a {
		text-decoration: none;
		color: var(--text-dark);
		font-weight: 500;
		padding: 0.75rem 1.5rem;
		transition: all 0.3s ease;
		border-radius: 0.5rem;
		margin: 0 1rem;
	}

	.mobile-menu a:hover {
		color: var(--primary-green);
		background-color: var(--secondary-beige);
	}

	.mobile-menu .btn {
		margin: 0.5rem 1rem;
		text-align: center;
	}

	.hidden {
		display: none !important;
	}

	@media (max-width: 768px) {
		.nav-links {
			display: none;
		}

		.mobile-menu-btn {
			display: flex;
		}

		.mobile-menu {
			display: flex;
		}

		.mobile-menu.hidden {
			display: none;
		}

		.nav-content {
			justify-content: center;
			position: relative;
		}

		.nav {
			padding: 1rem 0;
		}

		.header.scrolled .nav {
			padding: 0.75rem 0;
		}
	}

	@media (max-width: 480px) {
		.nav-links {
			gap: 1.5rem;
		}

		.nav-links a {
			font-size: 0.9rem;
		}

		.nav-links .btn {
			padding: 0.5rem 1rem;
			font-size: 0.9rem;
		}
	}
</style>

<script>
	// Gestion du scroll pour le header transparent
	document.addEventListener('DOMContentLoaded', function() {
		const header = document.getElementById('header');
		
		function handleScroll() {
			if (window.scrollY > 50) {
				header?.classList.add('scrolled');
			} else {
				header?.classList.remove('scrolled');
			}
		}

		// Écouter le scroll
		window.addEventListener('scroll', handleScroll);
		
		// Vérifier la position initiale
		handleScroll();

		// Mobile menu toggle
		const mobileMenuBtn = document.getElementById('mobile-menu-btn');
		const mobileMenu = document.getElementById('mobile-menu');
		
		if (mobileMenuBtn && mobileMenu) {
			mobileMenuBtn.addEventListener('click', function() {
				mobileMenu.classList.toggle('hidden');
			});
		}

		// Close mobile menu when clicking on a link
		const mobileNavLinks = document.querySelectorAll('#mobile-menu a');
		mobileNavLinks.forEach(link => {
			link.addEventListener('click', function() {
				mobileMenu?.classList.add('hidden');
			});
		});

		// Fermer le menu mobile en cliquant ailleurs
		document.addEventListener('click', function(event) {
			if (mobileMenu && !mobileMenu.contains(event.target) && !mobileMenuBtn?.contains(event.target)) {
				mobileMenu.classList.add('hidden');
			}
		});
	});
</script>